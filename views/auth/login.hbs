{{!-- <div class='img-login-container'>
    <img class='img-login' src='images/logo.png'>
</div> --}}

<div class="form-container">

    

    <div class="form" id="login-form">

        <img class='img-login' src='images/logo.png'> 

        <h1 class='form-header'>Log in</h1>
        
        <input class='form-fields' id="username" type="text" name="username" placeholder="Username">
        
        <input class='form-fields' id="password" type="password" name="password" placeholder="Password">

        <a class='form-forgot' href="/auth/send-reset">Forgot password?</a>

        <div class='login-container'>
            <button id="login-submit" type="submit">START</button>
        </div>
        {{!-- <p class="validCredentials">Invalid credentials</p>
        <p class="serverError">Something went wrong, try again later.</p> --}}
        
    </div>
</div>

<script>
    window.onload = function() {
        var username = document.getElementById("username")
        var password = document.getElementById("password")
        var loginSubmit = document.getElementById("login-submit")
        var validCredentials = document.getElementsByClassName("validCredentials")[0]
        var serverError = document.getElementsByClassName("serverError")[0]
        password.addEventListener("input", function() {
            validCredentials.style.display = "none"
        })
        loginSubmit.addEventListener("click", function() {
            axios({
                method: "POST",
                url: "{{{config.host}}}/auth/login",
                data: {
                    username: username.value,
                    password: password.value
                }
            })
            .then((response)=> {
                serverError.style.display = "none"
                if(response.data.loggedIn) location.href = "{{{config.host}}}/users/profile"
                else { 
                    validCredentials.style.display = "block"
                }
            })
            .catch((error)=> {
                serverError.style.display = "block"
            })
        })        
    }
</script>